{% extends "KnnfWhatsupBundle:Layout:admin.html.twig" %}

{% block title %}KnnfWhatsupBundle:Admin:index{% endblock %}

{% block body %}
{% block content %}
  <div id="content">
            <div id="content-header">
                <h1>Statistique</h1>
                <div class="btn-group">
                    <a class="btn"><i class="glyphicon glyphicon-file"></i></a>
                    <a class="btn" title="Manage Users"><i class="glyphicon glyphicon-user"></i></a>
                    <a class="btn"><i class="glyphicon glyphicon-comment"></i><span class="label label-danger">5</span></a>
                    <a class="btn"><i class="glyphicon glyphicon-shopping-cart"></i></a>
                </div>
            </div>

            <div id="breadcrumb">
                <a href="#" title="Go to Home" class="tip-bottom"><i class="glyphicon glyphicon-home"></i> Home</a>
                <a href="#" class="current">Statistique</a>
            </div>
            <div class="container-fluid">
                <div class="row">
                    <div class="col-12 center" style="text-align: center;">                 
                        <ul class="stat-boxes">
                            <li class="popover-visits">
                                <div class="left sparkline_bar_good"><span>2,4,9,7,12,10,12</span>+10%</div>
                                <div class="right">
                                    <strong>36094</strong>
                                    Visits
                                </div>
                            </li>
                            <li class="popover-users">
                                <div class="left sparkline_bar_neutral"><span>20,15,18,14,10,9,9,9</span>0%</div>
                                <div class="right">
                                    <strong>1433</strong>
                                    Users
                                </div>
                            </li>
                            <li class="popover-orders">
                                <div class="left sparkline_bar_bad"><span>3,5,9,7,12,20,10</span>-50%</div>
                                <div class="right">
                                    <strong>8650</strong>
                                    Orders
                                </div>
                            </li>
                            <li class="popover-tickets">
                                <div class="left sparkline_line_good"><span>12,6,9,23,14,10,17</span>+70%</div>
                                <div class="right">
                                    <strong>2968</strong>
                                    Tickets
                                </div>
                            </li>
                        </ul>
                    </div>  
                </div>
              	<div id="chart_div">



              	</div>
                
            </div>
        </div>

         <div id="ui" style="display:none">
    <h3>Data Over Time</h3>
    <div id='dataOverTimeConfig'></div>

    <h3>Totals for each metric</h3>
    <div id="scorecard"></div>

    <h3>Source and Mediums by Visitor</h3>
    <div id="sourceMediumTableConfig"></div>
  <div>
{% block javascripts %}
<script src="https://www.google.com/jsapi"></script>
   <script src="http://analytics-api-samples.googlecode.com/svn/trunk/src/reporting/javascript/ez-ga-dash/gadash-1.0.js" type="text/javascript"></script>
    
  <script src="https://apis.google.com/js/client.js?onload=gadashInit"></script>
  <script>
  gadash.configKeys({
    'apiKey': 'AIzaSyAPusS7gzp0bTla1ogGW_hJOwamaBwVT5Q',
    'clientId':'821751250764.apps.googleusercontent.com'
  });


  // Create new Chart.
  var dataOverTime = new gadash.Chart();
  var scoreCard = new gadash.Chart();
  var sourceMediumTable = new gadash.Chart();


  // Base chart configuration. Used for all charts.
  var baseConfig = {
    'last-n-days': 30,
    'query': {
      'metrics': 'ga:visitors, ga:visits, ga:pageviews',
    },
    'chartOptions': {
      width: 700
    }
  };


  // Configuration for data over time graph.
  var dataOverTimeConfig = {
    'divContainer': 'dataOverTimeConfig',
    'type': 'LineChart',
    'query': {
      'dimensions': 'ga:date',
      'sort': 'ga:date'
    },
    'chartOptions': {
      height: 300,
      legend: {position: 'bottom'},
      hAxis: {title:'Date'},
      curveType: 'function'
    }
  };


  // Configuration for totals for each metric.
  var scoreCardConfig = {
    'divContainer': 'scorecard',
  };


  // Configuration for source medium table.
  var sourceMediumTableConfig = {
    'divContainer': 'sourceMediumTableConfig',
    'query': {
      'dimensions': 'ga:source,ga:medium',
      'sort': '-ga:visitors',
      'max-results': 100
    }
  };


  /**
   * Handler for the run demo button.
   * Uses the table ID in the form to update the baseConfig object. Then
   * sets baseConfig into each of the charts. Then each chart's specific
   * configuration parameters are set. Finally all are rendered.
   */
  function renderGraph() {
     // Add the table id to the base configuration object.
     baseConfig.query.ids = document.getElementById('tableId').value;

     dataOverTime.set(baseConfig).set(dataOverTimeConfig).render();
     scoreCard.set(baseConfig).set(scoreCardConfig).render();
     sourceMediumTable.set(baseConfig).set(sourceMediumTableConfig).render();

     // Display UI.
     document.getElementById('ui').style.display = 'block';
   }
  </script>

 {% endblock %}
        {% endblock %}

{% endblock %}


