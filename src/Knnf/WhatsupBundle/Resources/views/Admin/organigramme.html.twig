{% extends "KnnfWhatsupBundle:Layout:admin.html.twig" %}

{% block title %}KnnfWhatsupBundle:Admin:event{% endblock %}

{% block body %}
	{% block content %}
		<div id="content">
			<div id="content-header">
				<h1>Organigramme</h1>
				<div class="btn-group">
					<a class="btn"><i class="glyphicon glyphicon-file"></i></a>
					<a class="btn" title="Manage Users"><i class="glyphicon glyphicon-user"></i></a>
					<a class="btn"><i class="glyphicon glyphicon-comment"></i><span class="label label-danger">5</span></a>
					<a class="btn"><i class="glyphicon glyphicon-shopping-cart"></i></a>
				</div>
			</div>
			
			<div id="breadcrumb">
				<a href="{{ path('admin_index')}}" title="Go to Home" class="tip-bottom"><i class="glyphicon glyphicon-home"></i> Home</a>
				<a href="{{ path('admin_organigramme')}}" class="current">Organigramme</a>
			</div>
			
			<div class="container-fluid">
				
				<div class="row">
					<div class="col-12">
					<button class="btn btn-default" onclick='window.location.href = "{{ url('admin_add_organigramme')}}"'> Ajouter </a></button>
						<div class="widget-box">
							<div class="widget-title">
								<span class="icon"><i class="glyphicon glyphicon-user"></i></span>
								<h5>Organigramme</h5><span title="{{count}} events" class="label label-info tip-left">{{count}}</span>
							</div>
							<div class="widget-content nopadding">
							<tbody>

								{% for orga in organigrammes %}
								{% set userlist = orga.userlist|split(',') %}
								<tr>
									<td><strong>{{ orga.name }}</strong></td>
									
								</tr>
								{% for user in userlist %}
								<tr>
										<td>{{ user }}</td>
								</tr>
								{% endfor %}
								{% endfor %}
							</tbody>
							</div>
						</div>
					</div>
				</div>
				
			</div>
			
		</div>
		
		{% block javascripts %}
			<script>
				function deleteEvent(id)
				{
					$.ajax({
						url: "{{ path('event_delete')}}",
						type: "post",
						data: {id : id},
						success: function(){
							alert("success");
							window.location.reload();
						},
						error:function(){
							alert("failure");
						}
					});
				};

				function activateEvent(id)
				{
					$.ajax({
						url: "{{ path('event_activate')}}",
						type: "post",
						data: {id : id},
						success: function(){
							alert("success");
							window.location.reload();
						},
						error:function(){
							alert("failure");
						}
					});
				};
			</script>
		{% endblock %}
	{% endblock %}
{% endblock %}
